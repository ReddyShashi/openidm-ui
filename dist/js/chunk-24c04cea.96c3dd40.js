/*!
 * Copyright 2019 ForgeRock AS. All Rights Reserved 
 *  Use of this code requires a commercial software license with ForgeRock AS. or with one of its affiliates. All use shall be exclusively subject to such license between the licensee and ForgeRock AS.
 */
(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-24c04cea"],{"11be":function(t,e,a){"use strict";var o=a("eb53"),r=a.n(o);r.a},"13bf":function(t,e,a){"use strict";var o=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("b-container",{staticClass:"px-0 h-100 d-flex",attrs:{fluid:""}},[o("div",{staticClass:"fr-m-auto fr-center-card align-self-center"},[o("b-card",{staticClass:"border-xs-0 border-sm d-flex fr-stretch-card",attrs:{"no-body":"","header-tag":"header","footer-tag":"footer"}},[o("b-card-header",{staticClass:"d-flex align-items-center flex-fill"},[o("div",{staticClass:"d-flex flex-fill flex-column justify-content-center"},[t.showLogo?o("b-img",{staticClass:"fr-logo mb-3 mt-2",attrs:{src:a("4acf"),fluid:"",alt:t.$t("common.form.logo")}}):t._e(),t._t("center-card-header")],2)]),t._t("center-card-body"),t._t("center-card-footer")],2)],1)])},r=[],s={name:"Center-Card",props:{showLogo:{type:Boolean,default:!1}}},i=s,n=(a("11be"),a("2877")),l=Object(n["a"])(i,o,r,!1,null,"ce41590c",null);e["a"]=l.exports},"362a":function(t,e,a){"use strict";var o=a("3be0"),r=a.n(o);r.a},"3be0":function(t,e,a){},"3fd4":function(t,e,a){"use strict";var o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.providers.length?a("div",[t._l(t.filteredProviders,(function(e,o){return a("button",{key:o,staticClass:"btn btn-lg btn-light btn-block fr-btn-social mb-3",style:t.socialButtonStyles[o],attrs:{type:"button"},on:{click:function(a){return t.goToIDP(e.provider)},mouseover:function(a){return t.hover(o,e.uiConfig.buttonCustomStyleHover)},mouseout:function(a){return t.hover(o,e.uiConfig.buttonCustomStyle)}}},[e.uiConfig.buttonImage?a("img",{attrs:{src:"static/"+e.uiConfig.buttonImage}}):a("i",{class:["fab fa-lg",e.uiConfig.iconClass]}),t.signin?a("span",{staticClass:"ml-1"},[t._v(t._s(t.$t("pages.selfservice.social.signIn"))+" "+t._s(e.uiConfig.buttonDisplayName))]):a("span",{staticClass:"ml-1"},[t._v(t._s(t.$t("pages.selfservice.social.signUp"))+" "+t._s(e.uiConfig.buttonDisplayName))])])})),0===this.filterProviders.length?a("div",{staticClass:"fr-form-break text-muted mb-3"},[a("div"),a("div",[t._v(t._s(t.$t("pages.selfservice.social.or")))]),a("div")]):t._e()],2):t._e()},r=[],s=a("2ef0"),i=a.n(s),n={name:"Social-Buttons",props:{signin:{type:Boolean,default:!1},filterProviders:{type:Array,default:function(){return[]}},filterProvidersObjects:{type:Array,default:function(){return[]}}},computed:{filteredProviders:function(){return i.a.filter(this.providers,(function(t){return t.uiConfig}))}},data:function(){return{providers:[],socialButtonStyles:[]}},mounted:function(){this.loadData()},methods:{loadData:function(){var t=this,e=this.getRequestService({headers:this.getAnonymousHeaders()});e.get("/authentication").then((function(e){t.providers=i.a.filter(e.data.providers||[],(function(e,a){if(0===t.filterProviders.length||i.a.includes(t.filterProviders,e.provider))return!0})),t.providers.length?i.a.each(t.providers,(function(e,a){"OPENAM"===e.provider&&1===t.providers.length?window.location.search||!0!==t.signin?t.providers.splice(a-1,1):t.goToIDP("OPENAM"):t.$set(t.socialButtonStyles,a,e.uiConfig.buttonCustomStyle),"salesforce"===e.provider&&(e.uiConfig.iconClass="fa-salesforce")})):t.filterProvidersObjects.length&&(t.providers=t.filterProvidersObjects)})).catch((function(e){t.displayNotification("error",e.response.data.message)}))},hover:function(t,e){this.$set(this.socialButtonStyles,t,e)},goToIDP:function(t){var e=this,a=this.getRequestService({headers:this.getAnonymousHeaders()});a.post("/authentication?_action=logout").then((function(){a.post("/identityProviders?_action=getAuthRedirect",{provider:t,landingPage:"".concat(window.location.protocol,"/").concat(window.location.host,"/#/login?_oauthReturn=true&provider=").concat(t,"&gotoURL=%23")}).then((function(t){localStorage.setItem("dataStoreToken",t.data.token),window.location.href=t.data.redirect})).catch((function(t){e.displayNotification("error",t.response.data.message)}))})).catch((function(t){e.displayNotification("error",t.response.data.message)}))}}},l=n,c=(a("f939"),a("2877")),u=Object(c["a"])(l,o,r,!1,null,"7088a11d",null);e["a"]=u.exports},"49c6":function(t,e,a){"use strict";var o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"mb-3"},[a("div",{ref:"floatingLabelGroup",class:[{"form-label-password":t.reveal},"form-label-group","mb-0"]},["checkbox"===t.inputType?a("input",{directives:[{name:"model",rawName:"v-model",value:t.inputValue,expression:"inputValue"},{name:"validate",rawName:"v-validate",value:t.validateRules,expression:"validateRules"}],ref:"input",class:[{polyfillPlaceholder:t.floatLabels,"is-invalid":t.errors.has(t.fieldName)&&t.showErrorState},"form-control"],attrs:{id:t.id,autofocus:t.autofocus,placeholder:t.label,"data-vv-as":t.label,"data-vv-validate-on":"submit",name:t.fieldName,type:"checkbox"},domProps:{checked:Array.isArray(t.inputValue)?t._i(t.inputValue,null)>-1:t.inputValue},on:{change:function(e){var a=t.inputValue,o=e.target,r=!!o.checked;if(Array.isArray(a)){var s=null,i=t._i(a,s);o.checked?i<0&&(t.inputValue=a.concat([s])):i>-1&&(t.inputValue=a.slice(0,i).concat(a.slice(i+1)))}else t.inputValue=r}}}):"radio"===t.inputType?a("input",{directives:[{name:"model",rawName:"v-model",value:t.inputValue,expression:"inputValue"},{name:"validate",rawName:"v-validate",value:t.validateRules,expression:"validateRules"}],ref:"input",class:[{polyfillPlaceholder:t.floatLabels,"is-invalid":t.errors.has(t.fieldName)&&t.showErrorState},"form-control"],attrs:{id:t.id,autofocus:t.autofocus,placeholder:t.label,"data-vv-as":t.label,"data-vv-validate-on":"submit",name:t.fieldName,type:"radio"},domProps:{checked:t._q(t.inputValue,null)},on:{change:function(e){t.inputValue=null}}}):a("input",{directives:[{name:"model",rawName:"v-model",value:t.inputValue,expression:"inputValue"},{name:"validate",rawName:"v-validate",value:t.validateRules,expression:"validateRules"}],ref:"input",class:[{polyfillPlaceholder:t.floatLabels,"is-invalid":t.errors.has(t.fieldName)&&t.showErrorState},"form-control"],attrs:{id:t.id,autofocus:t.autofocus,placeholder:t.label,"data-vv-as":t.label,"data-vv-validate-on":"submit",name:t.fieldName,type:t.inputType},domProps:{value:t.inputValue},on:{input:function(e){e.target.composing||(t.inputValue=e.target.value)}}}),t.reveal?a("div",{staticClass:"input-group-append"},[a("button",{staticClass:"btn btn-secondary",attrs:{type:"button"},on:{click:t.revealText}},[a("i",{class:[{"fa-eye-slash":!t.show},{"fa-eye":t.show},"fa"]})])]):t._e(),a("label",{attrs:{hidden:t.hideLabel,for:t.id}},[t._v(t._s(t.label))])]),t._t("validationError",[a("fr-validation-error",{attrs:{validatorErrors:t.errors,fieldName:t.fieldName}})])],2)},r=[],s=a("2ef0"),i=a.n(s),n=a("9588"),l={name:"Floating-Label-Input",components:{"fr-validation-error":n["a"]},props:{label:String,type:String,autofocus:String,fieldName:String,validateRules:[String,Object],reveal:Boolean,showErrorState:{type:Boolean,default:!0},defaultValue:{required:!1}},inject:["$validator"],data:function(){return{inputValue:"",id:null,floatLabels:!1,hideLabel:!0,inputType:this.type,show:!0}},beforeMount:function(){this.id="floatingLabelInput"+this._uid},mounted:function(){var t=this;i.a.delay(i.a.bind((function(){navigator.userAgent.indexOf("Edge")>=0?document.getElementById("".concat(t.id)).value.length&&(t.floatLabels=!0,t.inputValue=document.getElementById("".concat(t.id)).value):navigator.userAgent.indexOf("Chrome")>=0&&document.querySelectorAll("#".concat(t.id,":-webkit-autofill")).length>0&&(t.floatLabels=!0),t.hideLabel=!1}),this),400),this.defaultValue&&(this.inputValue=this.defaultValue),"true"===this.autofocus&&this.$refs.input.focus()},methods:{revealText:function(){"password"===this.inputType?(this.inputType="text",this.show=!1):(this.inputType="password",this.show=!0)}},watch:{inputValue:function(t){this.floatLabels=t.length>0,this.$emit("input",t)}}},c=l,u=(a("362a"),a("2877")),d=Object(u["a"])(c,o,r,!1,null,"7e7d904a",null);e["a"]=d.exports},"4acf":function(t,e,a){t.exports=a.p+"img/vertical-logo.fac466b9.svg"},"578a":function(t,e,a){"use strict";a.r(e);var o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("fr-center-card",{attrs:{showLogo:!0}},[a("div",{attrs:{slot:"center-card-header"},slot:"center-card-header"},[a("h2",{staticClass:"h2"},[t._v(t._s(t.$t("pages.login.signIn")))])]),a("b-card-body",{attrs:{slot:"center-card-body"},slot:"center-card-body"},[a("transition",{attrs:{name:"slide-fade"}},[t.wrongPasswordSubmitted?a("div",{staticClass:"alert alert-danger mb-4 text-left",attrs:{role:"alert"}},[t._v("\n                "+t._s(t.$t("pages.login.badPassword"))+"\n                "),this.$root.applicationStore.state.passwordReset?a("span",[a("br"),t._v(t._s(t.$t("pages.login.weCanHelp"))+" "),this.$root.applicationStore.state.passwordReset?a("router-link",{attrs:{action:"",to:{name:"PasswordReset"}}},[t._v(t._s(t.$t("pages.login.recoverPassword")))]):t._e()],1):t._e(),this.$root.applicationStore.state.usernameRecovery?a("span",[a("br"),t._v(t._s(t.$t("pages.login.weCanHelp"))+" "),a("router-link",{attrs:{action:"",to:{name:"ForgotUsername"}}},[t._v(t._s(t.$t("pages.login.recoverUsername")))])],1):t._e()]):t._e()]),a("fr-social-buttons",{attrs:{signin:!0}}),a("b-form",{staticClass:"form-signin mb-3",on:{submit:function(e){return e.preventDefault(),t.submit(e)}}},[a("fr-floating-label-input",{attrs:{fieldName:"username",label:t.$t("pages.login.username"),type:"text",autofocus:"true"},model:{value:t.username,callback:function(e){t.username=e},expression:"username"}}),a("fr-floating-label-input",{attrs:{fieldName:"password",label:t.$t("pages.login.password"),reveal:!0,type:"password"},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}}),a("b-button",{staticClass:"btn btn-block btn-lg",attrs:{type:"submit",variant:"primary"}},[t._v("\n                "+t._s(t.$t("pages.login.signIn"))+"\n            ")])],1),a("p",{staticClass:"text-center"},[this.$root.applicationStore.state.usernameRecovery?a("router-link",{attrs:{action:"",to:{name:"ForgotUsername"}}},[t._v(t._s(t.$t("pages.login.forgotUsername")))]):t._e(),this.$root.applicationStore.state.usernameRecovery&&this.$root.applicationStore.state.passwordReset?a("span",{staticClass:"mx-1"},[t._v("Â·")]):t._e(),this.$root.applicationStore.state.passwordReset?a("router-link",{attrs:{action:"",to:{name:"PasswordReset"}}},[t._v(t._s(t.$t("pages.login.forgotPassword")))]):t._e()],1)],1),this.$root.applicationStore.state.registration?[a("b-card-footer",{staticClass:"fr-footer-bottom",attrs:{slot:"center-card-footer"},slot:"center-card-footer"},[t._v("\n            "+t._s(t.$t("pages.login.newHere"))+"\n            "),a("router-link",{attrs:{action:"",to:{name:"Registration"}}},[t._v(t._s(t.$t("pages.login.createAccount")))])],1)]:t._e()],2)},r=[],s=a("2ef0"),i=a.n(s),n=a("bc3a"),l=a.n(n),c=a("13bf"),u=a("49c6"),d=a("3fd4"),f={name:"Login",components:{"fr-floating-label-input":u["a"],"fr-center-card":c["a"],"fr-social-buttons":d["a"]},data:function(){return{username:"",password:"",wrongPasswordSubmitted:!1}},mounted:function(){localStorage.removeItem("accountClaimingToken"),i.a.has(this.$root,"userStore.state.userId")&&this.$router.push("/")},methods:{submit:function(){var t=this,e=this.getRequestService({headers:{"X-OpenIDM-NoSession":!1,"X-OpenIDM-Password":this.encodeRFC5987IfNecessary(this.password),"X-OpenIDM-Username":this.encodeRFC5987IfNecessary(this.username)}}),a=this.getRequestService({headers:this.getAnonymousHeaders()});return a.post("/authentication?_action=logout").then((function(){e.post("/authentication?_action=login").then((function(a){t.$root.userStore.clearStoreAction(),t.$root.userStore.setUserIdAction(a.data.authorization.id),t.$root.userStore.setManagedResourceAction(a.data.authorization.component),t.$root.userStore.setRolesAction(a.data.authorization.roles),t.progressiveProfileCheck(a,(function(){l.a.all([e.get("".concat(a.data.authorization.component,"/").concat(a.data.authorization.id)),e.post("privilege?_action=listPrivileges"),e.get("schema/".concat(a.data.authorization.component))]).then(l.a.spread((function(e,a,o){t.$root.userStore.setProfileAction(e.data),t.$root.userStore.setSchemaAction(o.data),t.$root.userStore.setAccess(a.data),window.history.pushState("","",window.location.pathname),t.completeLogin()}))).catch((function(e){t.displayNotification("error",e.response.data.message)}))}))})).catch((function(){t.wrongPasswordSubmitted=!0}))})),!1}}},p=f,v=a("2877"),m=Object(v["a"])(p,o,r,!1,null,null,null);e["default"]=m.exports},"8c1f":function(t,e,a){},9588:function(t,e,a){"use strict";var o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{directives:[{name:"show",rawName:"v-show",value:t.validatorErrors.has(t.fieldName),expression:"validatorErrors.has(fieldName)"}],staticClass:"fr-validation-requirements text-left"},[a("span",{staticClass:"text-danger"},[t._v(t._s(t.validatorErrors.first(t.fieldName)))])])},r=[],s={name:"Validation-Error",props:["validatorErrors","fieldName"]},i=s,n=a("2877"),l=Object(n["a"])(i,o,r,!1,null,"ad00d232",null);e["a"]=l.exports},eb53:function(t,e,a){},f939:function(t,e,a){"use strict";var o=a("8c1f"),r=a.n(o);r.a}}]);
//# sourceMappingURL=chunk-24c04cea.96c3dd40.js.map