{"version":3,"sources":["webpack:///./src/components/selfservice/passwordreset/index.vue?d3aa","webpack:///./src/components/selfservice/common/EmailValidation.vue?4134","webpack:///src/components/selfservice/common/EmailValidation.vue","webpack:///./src/components/selfservice/common/EmailValidation.vue?1747","webpack:///./src/components/selfservice/common/EmailValidation.vue","webpack:///./src/components/selfservice/passwordreset/KbaVerification.vue?afa0","webpack:///src/components/selfservice/passwordreset/KbaVerification.vue","webpack:///./src/components/selfservice/passwordreset/KbaVerification.vue?c989","webpack:///./src/components/selfservice/passwordreset/KbaVerification.vue","webpack:///./src/components/selfservice/passwordreset/ResetStage.vue?f41b","webpack:///src/components/selfservice/passwordreset/ResetStage.vue","webpack:///./src/components/selfservice/passwordreset/ResetStage.vue?ff18","webpack:///./src/components/selfservice/passwordreset/ResetStage.vue","webpack:///src/components/selfservice/passwordreset/index.vue","webpack:///./src/components/selfservice/passwordreset/index.vue?75eb","webpack:///./src/components/selfservice/passwordreset/index.vue","webpack:///./src/components/selfservice/common/UserQuery.vue?4b9b","webpack:///src/components/selfservice/common/UserQuery.vue","webpack:///./src/components/selfservice/common/UserQuery.vue?549b","webpack:///./src/components/selfservice/common/UserQuery.vue","webpack:///./src/components/selfservice/common/Captcha.vue?5669","webpack:///src/components/selfservice/common/Captcha.vue","webpack:///./src/components/selfservice/common/Captcha.vue?3a12","webpack:///./src/components/selfservice/common/Captcha.vue","webpack:///./src/components/selfservice/common/GenericSelfService.vue?403f","webpack:///src/components/selfservice/common/GenericSelfService.vue","webpack:///./src/components/selfservice/common/GenericSelfService.vue?951d","webpack:///./src/components/selfservice/common/GenericSelfService.vue","webpack:///./src/components/utils/PolicyPanel.vue?9c00","webpack:///./src/components/utils/PolicyPasswordInput.vue?587e","webpack:///./src/components/utils/PolicyPanel.vue?9626","webpack:///src/components/utils/PolicyPanel.vue","webpack:///./src/components/utils/PolicyPanel.vue?2076","webpack:///./src/components/utils/PolicyPanel.vue","webpack:///src/components/utils/PolicyPasswordInput.vue","webpack:///./src/components/utils/PolicyPasswordInput.vue?c6c5","webpack:///./src/components/utils/PolicyPasswordInput.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","selfServiceType","attrs","slot","staticClass","_v","_s","$t","ref","tag","selfServiceDetails","apiType","on","advanceStage","loadingColor","staticRenderFns","component","$event","type","indexOf","_k","keyCode","key","save","preventDefault","_l","value","questionText","directives","name","rawName","expression","answers","modifiers","refInFor","class","errors","has","domProps","target","composing","$set","trim","$forceUpdate","$tc","requirements","required","length","error","defaultPolicyFailures","model","callback","$$v","password","reloadPage","mail","_e","_m","field","index","_f","text","saveFields","_n","customInput","_t","policies","policyFailures","label","$emit","isLoading","isValid","policy","policyId","includes","translate"],"mappings":"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","file":"js/chunk-2e534177.81216d35.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return (_vm.selfServiceType !== null && _vm.selfServiceType !== 'parameters')?_c('fr-center-card',{attrs:{\"showLogo\":true}},[_c('div',{attrs:{\"slot\":\"center-card-header\"},slot:\"center-card-header\"},[_c('h2',{staticClass:\"h2\"},[_vm._v(_vm._s(_vm.$t(\"pages.selfservice.headers.reset.title\")))])]),_c('b-card-body',{attrs:{\"slot\":\"center-card-body\"},slot:\"center-card-body\"},[_c(_vm.selfServiceType,{ref:\"selfServiceStage\",tag:\"component\",attrs:{\"selfServiceDetails\":_vm.selfServiceDetails,\"apiType\":_vm.apiType},on:{\"advanceStage\":_vm.advanceStage}})],1),_c('b-card-footer',{attrs:{\"slot\":\"center-card-footer\"},slot:\"center-card-footer\"},[_c('b-link',{attrs:{\"href\":\"#/login\"}},[_vm._v(_vm._s(_vm.$t(\"pages.selfservice.signIn\")))])],1)],1):_c('b-container',{staticClass:\"h-100 px-0\",attrs:{\"fluid\":\"\"}},[_c('div',{staticClass:\"h-100 d-flex\"},[_c('div',{staticClass:\"m-auto fr-center-card\"},[_c('bounce-loader',{attrs:{\"color\":_vm.loadingColor}})],1)])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('b-alert',{attrs:{\"show\":\"\"}},[_vm._v(\"\\n    \"+_vm._s(_vm.$t((\"pages.selfservice.headers.\" + _vm.apiType + \".emailSent\")))+\"\\n\")])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n    <b-alert show>\n        {{$t(`pages.selfservice.headers.${apiType}.emailSent`)}}\n    </b-alert>\n</template>\n\n<script>\n/**\n * @description Selfservice stage for multiple selfservice flows, displays a email sent message\n *\n **/\nexport default {\n    name: 'Email-Validation',\n    props: {\n        apiType: { required: true }\n    }\n};\n</script>\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./EmailValidation.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./EmailValidation.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./EmailValidation.vue?vue&type=template&id=5ce65624&\"\nimport script from \"./EmailValidation.vue?vue&type=script&lang=js&\"\nexport * from \"./EmailValidation.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('b-form',{on:{\"keyup\":function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"enter\",13,$event.key,\"Enter\")){ return null; }return _vm.save($event)},\"submit\":function($event){$event.preventDefault();}}},[_c('p',{staticClass:\"text-center mb-4\"},[_vm._v(\"\\n        \"+_vm._s(_vm.$t(\"pages.selfservice.passwordReset.kbaVerificationStageDescription\"))+\"\\n    \")]),_vm._l((_vm.answers),function(value,key){return _c('div',{key:key,staticClass:\"form-group text-left\"},[_c('label',{staticClass:\"col-form-label pt-0 pb-2\",attrs:{\"for\":key}},[_vm._v(_vm._s(_vm.questionText[key]))]),_c('input',{directives:[{name:\"validate\",rawName:\"v-validate\",value:('required'),expression:\"'required'\"},{name:\"model\",rawName:\"v-model.trim\",value:(_vm.answers[key]),expression:\"answers[key]\",modifiers:{\"trim\":true}}],key:key,ref:key,refInFor:true,class:{'form-control': true, 'is-invalid': _vm.errors.has(key)},attrs:{\"data-vv-as\":_vm.$t('common.user.kba.answer'),\"autofocus\":\"true\",\"name\":key,\"id\":key},domProps:{\"value\":(_vm.answers[key])},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.$set(_vm.answers, key, $event.target.value.trim())},\"blur\":function($event){return _vm.$forceUpdate()}}}),_c('fr-validation-error',{attrs:{\"validatorErrors\":_vm.errors,\"fieldName\":key}})],1)}),_c('b-button',{attrs:{\"block\":true,\"size\":\"lg\",\"variant\":\"primary\"},on:{\"click\":_vm.save}},[_vm._v(\"\\n        \"+_vm._s(_vm.$tc('common.user.kba.submitAnswers', _vm.selfServiceDetails.requirements.required.length))+\"\\n    \")])],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n    <b-form @keyup.enter=\"save\" @submit.prevent>\n        <p class='text-center mb-4'>\n            {{$t(`pages.selfservice.passwordReset.kbaVerificationStageDescription`)}}\n        </p>\n        <div class=\"form-group text-left\"\n            v-for=\"(value, key) in answers\"\n            :key=\"key\">\n            <label class=\"col-form-label pt-0 pb-2\" :for=\"key\">{{questionText[key]}}</label>\n\n            <input :ref=\"key\" :key=\"key\" v-validate=\"'required'\" :data-vv-as=\"$t('common.user.kba.answer')\" autofocus=\"true\" :class=\"{'form-control': true, 'is-invalid': errors.has(key)}\" :name=\"key\" :id=\"key\"  v-model.trim=\"answers[key]\" />\n            <fr-validation-error :validatorErrors=\"errors\" :fieldName=\"key\"></fr-validation-error>\n        </div>\n\n        <b-button @click=\"save\" :block=\"true\" size=\"lg\" variant=\"primary\">\n            {{$tc('common.user.kba.submitAnswers', selfServiceDetails.requirements.required.length)}}\n        </b-button>\n\n    </b-form>\n</template>\n\n<script>\nimport _ from 'lodash';\nimport ValidationError from '@/components/utils/ValidationError';\n\n/**\n * @description Selfservice stage for password reset, handles securing a users password change with verifying KBA answers\n *\n **/\nexport default {\n    name: 'Kba-Verification',\n    inject: ['$validator'],\n    components: {\n        'fr-validation-error': ValidationError\n    },\n    props: {\n        selfServiceDetails: { required: true }\n    },\n    data () {\n        let { locale, fallbackLocale } = this.$i18n,\n            { properties, required } = this.selfServiceDetails.requirements;\n\n        return {\n            questionText: _.mapValues(properties, (value) => {\n                if (_.has(value, 'systemQuestion')) {\n                    let question = value.systemQuestion[locale] || value.systemQuestion[fallbackLocale];\n                    return question;\n                }\n\n                if (_.has(value, 'userQuestion')) {\n                    return value.userQuestion;\n                }\n            }),\n            answers: required.reduce((acc, answer) => _.set(acc, answer, ''), {})\n        };\n    },\n    mounted () {\n        // This will auto focus as long as one answer field is generated\n        if (this.$refs && this.$refs['answer1']) {\n            this.$refs['answer1'][0].focus();\n        }\n    },\n    methods: {\n        emitData () {\n            this.$emit('advanceStage', this.getData());\n        },\n        getData () {\n            return this.answers;\n        },\n        isValid () {\n            /* istanbul ignore next */\n            return this.$validator.validateAll();\n        },\n        save () {\n            /* istanbul ignore next */\n            this.isValid().then((valid) => {\n                if (valid) {\n                    this.emitData();\n                }\n            });\n        }\n    }\n};\n</script>\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./KbaVerification.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./KbaVerification.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./KbaVerification.vue?vue&type=template&id=313360e6&\"\nimport script from \"./KbaVerification.vue?vue&type=script&lang=js&\"\nexport * from \"./KbaVerification.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return (_vm.selfServiceDetails.tag ==='end')?_c('div',[_c('b-alert',{attrs:{\"show\":\"\"}},[_c('p',[_vm._v(_vm._s(_vm.$t('pages.selfservice.passwordReset.successMessage')))])])],1):(typeof _vm.selfServiceDetails.error !== 'string')?_c('div',[_c('b-form',{on:{\"keyup\":function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"enter\",13,$event.key,\"Enter\")){ return null; }return _vm.save($event)},\"submit\":function($event){$event.preventDefault();}}},[_c('fr-policy-password-input',{attrs:{\"defaultPolicyFailures\":_vm.defaultPolicyFailures,\"policyApi\":\"selfservice/reset\",\"name\":\"password\",\"label\":_vm.$t('pages.selfservice.passwordReset.newPassword')},model:{value:(_vm.password),callback:function ($$v) {_vm.password=$$v},expression:\"password\"}}),_c('b-button',{attrs:{\"block\":true,\"size\":\"lg\",\"variant\":\"primary\"},on:{\"click\":_vm.save}},[_vm._v(\"\\n            \"+_vm._s(_vm.$t(\"pages.selfservice.passwordReset.changePassword\"))+\"\\n        \")])],1)],1):_c('div',[_c('b-alert',{attrs:{\"variant\":\"danger\",\"show\":\"\"}},[_c('b',[_vm._v(_vm._s(_vm.$t('pages.selfservice.passwordReset.errorMessage')))]),_c('p',[_vm._v(_vm._s(_vm.selfServiceDetails.error))])]),_c('div',{staticClass:\"mt-2\"},[_c('a',{attrs:{\"href\":\"#/passwordreset\"},on:{\"click\":_vm.reloadPage}},[_vm._v(_vm._s(_vm.$t(\"pages.selfservice.passwordReset.tryAgain\")))])])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n    <div v-if=\"selfServiceDetails.tag ==='end'\">\n        <b-alert show>\n            <p>{{$t('pages.selfservice.passwordReset.successMessage')}}</p>\n        </b-alert>\n    </div>\n    <div v-else-if=\"typeof selfServiceDetails.error !== 'string'\">\n        <b-form @keyup.enter=\"save\" @submit.prevent>\n                <fr-policy-password-input :defaultPolicyFailures=\"defaultPolicyFailures\" policyApi=\"selfservice/reset\" v-model=\"password\" name=\"password\" :label=\"$t('pages.selfservice.passwordReset.newPassword')\" ></fr-policy-password-input>\n            <b-button @click=\"save\" :block=\"true\" size=\"lg\" variant=\"primary\">\n                {{$t(\"pages.selfservice.passwordReset.changePassword\")}}\n            </b-button>\n        </b-form>\n    </div>\n    <div v-else>\n        <b-alert variant=\"danger\" show>\n            <b>{{$t('pages.selfservice.passwordReset.errorMessage')}}</b>\n            <p>{{selfServiceDetails.error}}</p>\n        </b-alert>\n        <div class=\"mt-2\">\n            <a href=\"#/passwordreset\" v-on:click=\"reloadPage\">{{$t(\"pages.selfservice.passwordReset.tryAgain\")}}</a>\n        </div>\n    </div>\n</template>\n\n<script>\nimport { has, find, map } from 'lodash';\nimport PolicyPasswordInput from '@/components/utils/PolicyPasswordInput';\n\n/**\n* @description Selfservice stage for password reset, handles the final result of password reset, either displaying an error or that the reset has been complete\n*\n**/\nexport default {\n    name: 'Reset-Stage',\n    components: {\n        'fr-policy-password-input': PolicyPasswordInput\n    },\n    props: {\n        selfServiceDetails: { required: true }\n    },\n    data () {\n        return {\n            password: '',\n            defaultPolicyFailures: null\n        };\n    },\n    methods: {\n        getData () {\n            return {\n                password: this.password\n            };\n        },\n        save () {\n            this.$emit('advanceStage', this.getData());\n        },\n        reloadPage (event) {\n            event.preventDefault();\n            let hash = window.location.hash;\n\n            // remove any `code` after last foward slash in url\n            window.location.hash = hash.substr(0, hash.lastIndexOf('/') + 1);\n            window.location.reload();\n        }\n    },\n    watch: {\n        selfServiceDetails: {\n            handler (val) {\n                /*\n                    If there is a change to selfServiceDetails it's probably because of a\n                    policy failure on password that could not be handled on the fly with\n                    \"?_action=validateObject\". Look for those failures here and send them to the\n                    PolicyPasswordInput via it's defaultPolicyFailures property.\n                */\n                if (has(val, 'requirements.error.detail.failedPolicyRequirements')) {\n                    let failedPolicy = find(val.requirements.error.detail.failedPolicyRequirements, { property: 'password' });\n\n                    if (failedPolicy && failedPolicy.policyRequirements) {\n                        let policyError = this.$t(`common.policyValidationMessages.${failedPolicy.policyRequirements[0].policyRequirement}`, failedPolicy.policyRequirements[0].params),\n                            errorMessage = `${this.$t(`common.policyValidationMessages.policyValidationFailed`, { property: failedPolicy.property })}: ${policyError}`;\n\n                        /* istanbul ignore next */\n                        this.displayNotification('error', errorMessage);\n\n                        this.defaultPolicyFailures = map(failedPolicy.policyRequirements, 'policyRequirement');\n                    }\n                }\n            },\n            deep: true\n        }\n    }\n};\n</script>\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ResetStage.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ResetStage.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./ResetStage.vue?vue&type=template&id=80c1661a&\"\nimport script from \"./ResetStage.vue?vue&type=script&lang=js&\"\nexport * from \"./ResetStage.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","<template>\n    <fr-center-card v-if=\"selfServiceType !== null && selfServiceType !== 'parameters'\" :showLogo=\"true\">\n        <div slot=\"center-card-header\">\n            <h2 class=\"h2\">{{$t(`pages.selfservice.headers.reset.title`)}}</h2>\n        </div>\n\n        <b-card-body slot=\"center-card-body\">\n            <component ref=\"selfServiceStage\"\n                :is=\"selfServiceType\"\n                :selfServiceDetails=\"selfServiceDetails\"\n                @advanceStage=\"advanceStage\"\n                :apiType=\"apiType\">\n            </component>\n        </b-card-body>\n\n        <b-card-footer slot=\"center-card-footer\">\n            <b-link href=\"#/login\">{{$t(\"pages.selfservice.signIn\")}}</b-link>\n        </b-card-footer>\n    </fr-center-card>\n\n    <b-container fluid class=\"h-100 px-0\"  v-else>\n        <div class=\"h-100 d-flex\">\n            <div class=\"m-auto fr-center-card\">\n                <bounce-loader :color=\"loadingColor\"></bounce-loader>\n            </div>\n        </div>\n    </b-container>\n</template>\n\n<script>\nimport _ from 'lodash';\nimport { BounceLoader } from 'vue-spinner/dist/vue-spinner.min.js';\nimport styles from '@/scss/main.scss';\nimport CenterCard from '@/components/utils/CenterCard';\nimport Captcha from '@/components/selfservice/common/Captcha';\nimport EmailValidation from '@/components/selfservice/common/EmailValidation';\nimport KbaVerification from '@/components/selfservice/passwordreset/KbaVerification';\nimport GenericSelfService from '@/components/selfservice/common/GenericSelfService';\nimport ResetStage from '@/components/selfservice/passwordreset/ResetStage';\nimport SelfserviceAPI from '@/components/selfservice/mixins/SelfserviceAPIMixin';\nimport UserQuery from '@/components/selfservice/common/UserQuery';\n\n/**\n * @description Selfservice controlling component for recovering a lost password. Makes use of selfservice-reset.json config file.\n *\n * @mixin - selfservice/mixins/SelfserviceAPIMixin.vue\n */\nexport default {\n    name: 'Password-Reset',\n    components: {\n        Captcha,\n        EmailValidation,\n        UserQuery,\n        ResetStage,\n        kbaSecurityAnswerVerificationStage: KbaVerification,\n        GenericSelfService,\n        'bounce-loader': BounceLoader,\n        'fr-center-card': CenterCard\n    },\n    data () {\n        return {\n            selfServiceType: null,\n            selfServiceDetails: null,\n            loadingColor: styles.baseColor,\n            apiType: 'reset'\n        };\n    },\n    mounted () {\n        /* istanbul ignore next */\n        if (this.$route.params.queryParams) {\n            let queryParams = this.parseQueryParams(this.$route.params.queryParams);\n\n            this.advanceStage(queryParams);\n        } else {\n            this.loadData();\n        }\n    },\n    methods: {\n        setChildComponent (type, details) {\n            this.selfServiceDetails = details;\n\n            if (type === 'parameters') {\n                this.selfServiceType = null;\n                this.advanceStage({});\n            } else {\n                let stageCheck = false;\n\n                _.each(this.$options.components, (value, key) => {\n                    if (_.toLower(key) === _.toLower(type)) {\n                        stageCheck = true;\n                    }\n                });\n\n                if (stageCheck) {\n                    this.selfServiceType = type;\n                } else {\n                    this.selfServiceType = 'GenericSelfService';\n                }\n            }\n        },\n        apiErrorCallback (error) {\n            this.setChildComponent('resetStage', { error: error.response.data.message });\n        }\n    },\n    mixins: [\n        SelfserviceAPI\n    ]\n};\n</script>\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=c6102fc4&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('b-form',{on:{\"keyup\":function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"enter\",13,$event.key,\"Enter\")){ return null; }return _vm.save($event)},\"submit\":function($event){$event.preventDefault();}}},[_c('p',{staticClass:\"text-center mb-4\"},[_vm._v(\"\\n        \"+_vm._s(_vm.$t('pages.selfservice.passwordReset.userQuery'))+\"\\n    \")]),_c('b-form-group',[_c('fr-floating-label-input',{attrs:{\"fieldName\":\"mail\",\"label\":_vm.$t('common.placeholders.emailAddress'),\"type\":\"text\",\"autofocus\":\"true\"},model:{value:(_vm.mail),callback:function ($$v) {_vm.mail=$$v},expression:\"mail\"}})],1),_c('b-button',{attrs:{\"size\":\"lg\",\"block\":true,\"variant\":\"primary\"},on:{\"click\":_vm.save}},[(_vm.apiType === 'username')?_c('div',[_vm._v(\"\\n            \"+_vm._s(_vm.$t(\"pages.selfservice.forgotUsername.advanceStageButtonText\"))+\"\\n        \")]):_c('div',[_vm._v(\"\\n            \"+_vm._s(_vm.$t(\"pages.selfservice.passwordReset.advanceStageButtonText\"))+\"\\n        \")])])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n    <b-form @keyup.enter=\"save\" @submit.prevent>\n        <p class='text-center mb-4'>\n            {{$t('pages.selfservice.passwordReset.userQuery')}}\n        </p>\n        <b-form-group>\n            <fr-floating-label-input v-model=\"mail\" fieldName=\"mail\" :label=\"$t('common.placeholders.emailAddress')\" type=\"text\" autofocus=\"true\"></fr-floating-label-input>\n        </b-form-group>\n\n        <b-button @click=\"save\" size=\"lg\" :block=\"true\" variant=\"primary\">\n            <div v-if=\"apiType === 'username'\">\n                {{$t(\"pages.selfservice.forgotUsername.advanceStageButtonText\")}}\n            </div>\n            <div v-else>\n                {{$t(\"pages.selfservice.passwordReset.advanceStageButtonText\")}}\n            </div>\n        </b-button>\n    </b-form>\n</template>\n\n<script>\nimport FloatingLabelInput from '@/components/utils/FloatingLabelInput';\n\n/**\n * @description Selfservice stage for multiple selfservice flows, typically used with an email to locate a user in the system to continue on with further\n * selfservice stages\n *\n **/\nexport default {\n    name: 'User-Query',\n    components: {\n        'fr-floating-label-input': FloatingLabelInput\n    },\n    props: {\n        apiType: { required: true }\n    },\n    data () {\n        return {\n            mail: ''\n        };\n    },\n    methods: {\n        getData () {\n            return {\n                queryFilter: `mail eq \"${this.mail}\"`\n            };\n        },\n        save () {\n            /* istanbul ignore next */\n            this.$emit('advanceStage', this.getData());\n        }\n    }\n};\n</script>\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./UserQuery.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./UserQuery.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./UserQuery.vue?vue&type=template&id=3e7a5bc8&\"\nimport script from \"./UserQuery.vue?vue&type=script&lang=js&\"\nexport * from \"./UserQuery.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"mb-4\",attrs:{\"id\":\"captchaBody\"}},[(_vm.apiType)?_c('p',{staticClass:\"text-center mb-4\"},[_vm._v(\"\\n        \"+_vm._s(_vm.$t((\"pages.selfservice.headers.\" + _vm.apiType + \".description\")))+\"\\n    \")]):_vm._e(),_vm._m(0)])}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"recaptcha-wrapper \"},[_c('div',{staticClass:\"recaptcha-bound\"},[_c('div',{attrs:{\"id\":\"recaptchaContainer\"}})])])}]\n\nexport { render, staticRenderFns }","<template>\n    <div id=\"captchaBody\" class=\"mb-4\">\n        <p class='text-center mb-4' v-if=\"apiType\">\n            {{$t(`pages.selfservice.headers.${apiType}.description`)}}\n        </p>\n        <div class=\"recaptcha-wrapper \">\n            <div class=\"recaptcha-bound\">\n                <div id=\"recaptchaContainer\"></div>\n            </div>\n        </div>\n    </div>\n</template>\n\n<script>\n/**\n * @description Selfservice stage for multiple selfservice flows, displays a google captcha\n *\n **/\nimport _ from 'lodash';\n\nexport default {\n    name: 'Captcha',\n    props: {\n        advanceStage: { required: false },\n        selfServiceDetails: { required: true },\n        apiType: { required: false }\n    },\n    created () {\n        let recaptchaScript = document.createElement('script');\n\n        recaptchaScript.setAttribute('src', 'https://www.google.com/recaptcha/api.js');\n        document.head.appendChild(recaptchaScript);\n    },\n    mounted () {\n        this.loadRecaptcha();\n    },\n    methods: {\n        loadRecaptcha () {\n            /* istanbul ignore next */\n            if (_.isUndefined(this.selfServiceDetails.requirements.properties.response.recaptchaSiteKey) || this.selfServiceDetails.requirements.properties.response.recaptchaSiteKey.length === 0) {\n                this.displayNotification('error', this.$t('pages.selfservice.captchaError'));\n            } else {\n                setTimeout(() => {\n                    if (typeof window.grecaptcha === 'undefined') {\n                        this.loadRecaptcha();\n                    } else {\n                        window.grecaptcha.render('recaptchaContainer', {\n                            sitekey: this.selfServiceDetails.requirements.properties.response.recaptchaSiteKey,\n                            callback: this.handleCaptchaCallback\n                        });\n                    }\n                }, 500);\n            }\n        },\n        handleCaptchaCallback (response) {\n            this.recaptchaResponse = response;\n            /* istanbul ignore next */\n            if (this.$listeners.advanceStage) {\n                this.$emit('advanceStage', this.getData());\n            }\n        },\n        getData () {\n            return {\n                response: this.recaptchaResponse,\n                'g-recaptcha-response': this.recaptchaResponse\n            };\n        }\n    }\n};\n</script>\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Captcha.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Captcha.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Captcha.vue?vue&type=template&id=11afae16&\"\nimport script from \"./Captcha.vue?vue&type=script&lang=js&\"\nexport * from \"./Captcha.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_vm._l((_vm.displayDetails),function(field,index){return [((field.type === 'string' || field.type === 'number'))?_c('b-form-group',{key:'genericField' +index,attrs:{\"label\":_vm._f(\"startCase\")(field.key),\"label-for\":\"field.key\",\"horizontal\":\"\"}},[(field.type === 'string')?_c('b-form-input',{ref:index === 0 ? 'focusInput' : '',refInFor:true,attrs:{\"name\":field.key,\"placeholder\":field.text,\"type\":\"text\",\"autocomplete\":field.key},model:{value:(_vm.saveFields[field.key]),callback:function ($$v) {_vm.$set(_vm.saveFields, field.key, (typeof $$v === 'string'? $$v.trim(): $$v))},expression:\"saveFields[field.key]\"}}):_vm._e(),(field.type === 'number')?_c('b-form-input',{ref:index === 0 ? 'focusInput' : '',refInFor:true,attrs:{\"horizontal\":\"\",\"name\":field.key,\"type\":\"number\",\"autocomplete\":field.key},model:{value:(_vm.saveFields[field.key]),callback:function ($$v) {_vm.$set(_vm.saveFields, field.key, _vm._n($$v))},expression:\"saveFields[field.key]\"}}):_vm._e()],1):_vm._e(),(field.type === 'boolean')?_c('b-form-group',{key:'genericField' +index},[_c('div',{staticClass:\"form-row\"},[_c('label',{staticClass:\"col-form-label col-sm-3\",attrs:{\"for\":field.key}},[_vm._v(_vm._s(_vm._f(\"startCase\")(field.key)))]),_c('div',{staticClass:\"mr-auto\"},[_c('toggle-button',{staticClass:\"mt-2 p-0 fr-toggle-primary\",attrs:{\"height\":28,\"width\":56,\"sync\":true,\"cssColors\":true},model:{value:(_vm.saveFields[field.key]),callback:function ($$v) {_vm.$set(_vm.saveFields, field.key, $$v)},expression:\"saveFields[field.key]\"}})],1)])]):_vm._e()]}),_c('b-button',{staticClass:\"mt-4\",attrs:{\"block\":true,\"size\":\"lg\",\"variant\":\"primary\"},on:{\"click\":_vm.save}},[_vm._v(\"\\n        \"+_vm._s(_vm.$t(\"common.form.submit\"))+\"\\n    \")])],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n    <div>\n        <template v-for=\"(field, index) in displayDetails\">\n            <b-form-group :label=\"field.key | startCase\" label-for=\"field.key\" horizontal :key=\"'genericField' +index\" v-if=\"(field.type === 'string' || field.type === 'number')\">\n                <b-form-input  :ref=\"index === 0 ? 'focusInput' : ''\" v-if=\"field.type === 'string'\"\n                               :name=\"field.key\"\n                               :placeholder=\"field.text\"\n                               type=\"text\"\n                               :autocomplete=\"field.key\"\n                               v-model.trim=\"saveFields[field.key]\"></b-form-input>\n\n                <b-form-input horizontal :ref=\"index === 0 ? 'focusInput' : ''\" v-if=\"field.type === 'number'\"\n                              :name=\"field.key\"\n                              type=\"number\"\n                              :autocomplete=\"field.key\"\n                              v-model.number=\"saveFields[field.key]\"></b-form-input>\n            </b-form-group>\n\n            <!-- for boolean values -->\n            <b-form-group :key=\"'genericField' +index\" v-if=\"field.type === 'boolean'\">\n                <div class=\"form-row\">\n                    <label class=\"col-form-label col-sm-3\" :for=\"field.key\">{{field.key | startCase}}</label>\n                    <div class=\"mr-auto\">\n                        <toggle-button class=\"mt-2 p-0 fr-toggle-primary\"\n                                       :height=\"28\"\n                                       :width=\"56\"\n                                       :sync=\"true\"\n                                       :cssColors=\"true\"\n                                       v-model=\"saveFields[field.key]\"/>\n                    </div>\n                </div>\n            </b-form-group>\n        </template>\n        <b-button @click=\"save\" class='mt-4' :block=\"true\" size=\"lg\" variant=\"primary\">\n            {{$t(\"common.form.submit\")}}\n        </b-button>\n    </div>\n</template>\n\n<script>\nimport _ from 'lodash';\n\n/**\n * @description Selfservice stage for multiple selfservice flows, attempts to auto generate a form for a user to fill out. Currently\n * generates only numbers, strings and boolean fields. This stage will only load when no other stage is found.\n *\n **/\nexport default {\n    name: 'Generic-Self-Service',\n    props: {\n        selfServiceDetails: { required: true }\n    },\n    data () {\n        let saveData = {},\n            displayDetails = [];\n\n        if (this.selfServiceDetails && this.selfServiceDetails.requirements && this.selfServiceDetails.requirements.properties) {\n            _.each(this.selfServiceDetails.requirements.properties, (prop, key) => {\n                displayDetails.push({\n                    type: prop.type,\n                    text: prop.description,\n                    key: key\n                });\n\n                if (prop.type === 'string') {\n                    saveData[key] = '';\n                } else if (prop.type === 'boolean') {\n                    saveData[key] = false;\n                } else {\n                    saveData[key] = null;\n                }\n            });\n        }\n\n        return {\n            saveFields: saveData,\n            displayDetails: displayDetails\n        };\n    },\n    methods: {\n        getData () {\n            return this.saveFields;\n        },\n\n        save () {\n            this.$emit('advanceStage', this.getData());\n        },\n\n        isValid () {\n            return Promise.resolve(true);\n        }\n    },\n    filters: {\n        startCase (value) {\n            return _.startCase(value);\n        }\n    }\n};\n</script>\n\n<style scoped></style>\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./GenericSelfService.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./GenericSelfService.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./GenericSelfService.vue?vue&type=template&id=bd6ef798&scoped=true&\"\nimport script from \"./GenericSelfService.vue?vue&type=script&lang=js&\"\nexport * from \"./GenericSelfService.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"bd6ef798\",\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PolicyPanel.vue?vue&type=style&index=0&id=8583d52e&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PolicyPanel.vue?vue&type=style&index=0&id=8583d52e&lang=scss&scoped=true&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('b-form-group',{staticClass:\"mb-0\"},[(!_vm.customInput)?_vm._t(\"input-with-validation-panel\",[_c('fr-floating-label-input',{directives:[{name:\"validate\",rawName:\"v-validate.initial\",value:('required|policy'),expression:\"'required|policy'\",modifiers:{\"initial\":true}}],attrs:{\"name\":\"password\",\"fieldName\":\"password\",\"type\":\"password\",\"label\":_vm.label || _vm.$t('common.placeholders.password'),\"reveal\":true,\"showErrorState\":false},on:{\"input\":function($event){return _vm.$emit('input', $event)}},model:{value:(_vm.password),callback:function ($$v) {_vm.password=$$v},expression:\"password\"}},[_c('fr-policy-panel',{attrs:{\"slot\":\"validationError\",\"policies\":_vm.policies,\"policyFailures\":(_vm.showDefaultPolicyFailures) ?  _vm.defaultPolicyFailures : _vm.policyFailures},slot:\"validationError\"})],1)]):[_vm._t(\"custom-input\"),_c('fr-policy-panel',{attrs:{\"policies\":_vm.policies,\"policyFailures\":(_vm.showDefaultPolicyFailures) ?  _vm.defaultPolicyFailures : _vm.policyFailures}})]],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"card border-0 mt-3\"},[_c('transition',{attrs:{\"name\":\"fade\",\"mode\":\"out-in\",\"duration\":150}},[(!_vm.isLoading)?[(!_vm.isValid)?_c('ul',{staticClass:\"text-left pl-3\"},_vm._l((_vm.policies),function(policy){return _c('li',{key:policy.policyId,class:[{'fr-valid': !_vm.includes(_vm.policyFailures, policy.name)}, 'text-primary fr-policy-list-item']},[_c('small',{staticClass:\"text-body\"},[_vm._v(_vm._s(_vm.translate(policy)))])])}),0):_c('div',{staticClass:\"alert alert-success mt-1\",attrs:{\"role\":\"alert\"}},[_c('i',{staticClass:\"fa fa-check-circle\"}),_vm._v(\" \"+_vm._s(_vm.$t('common.policyValidationMessages.successMessages.password'))+\"\\n            \")])]:_vm._e()],2)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n    <div class=\"card border-0 mt-3\">\n        <transition name=\"fade\" mode=\"out-in\" :duration=\"150\">\n            <template v-if=\"!isLoading\">\n                <ul class=\"text-left pl-3\" v-if=\"!isValid\">\n                    <li v-for=\"policy in policies\"\n                    :key=\"policy.policyId\"\n                    :class=\"[{'fr-valid': !includes(policyFailures, policy.name)}, 'text-primary fr-policy-list-item']\">\n                        <small class=\"text-body\">{{translate(policy)}}</small>\n                    </li>\n                </ul>\n                <div v-else class=\"alert alert-success mt-1\" role=\"alert\">\n                    <i class=\"fa fa-check-circle\"></i> {{$t('common.policyValidationMessages.successMessages.password')}}\n                </div>\n            </template>\n        </transition>\n    </div>\n</template>\n\n<script>\nimport _ from 'lodash';\n\n/**\n * @description Part of the password policy component to display the list of policy items required\n *\n **/\nexport default {\n    name: 'PolicyPanel',\n    props: ['policies', 'policyFailures'],\n    data () {\n        return {};\n    },\n    computed: {\n        isValid () {\n            return _.isArray(this.policyFailures) && _.isEmpty(this.policyFailures);\n        },\n        isLoading () {\n            return this.policyFailures === 'loading' || this.policyFailures === false;\n        }\n    },\n    methods: {\n        translate (policy) {\n            let path = `common.policyValidationMessages.${policy.name}`;\n\n            return this.$t(path, policy.params);\n        },\n        includes: _.includes\n    },\n    watch: {\n        policyFailures (value) {\n            this.policyFailures = value;\n        }\n    }\n};\n</script>\n<style lang=\"scss\" scoped>\n    .fr-policy-list-item {\n        line-height: 1.25;\n    }\n\n    .fr-valid {\n        opacity: 0.5;\n    }\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PolicyPanel.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PolicyPanel.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./PolicyPanel.vue?vue&type=template&id=8583d52e&scoped=true&\"\nimport script from \"./PolicyPanel.vue?vue&type=script&lang=js&\"\nexport * from \"./PolicyPanel.vue?vue&type=script&lang=js&\"\nimport style0 from \"./PolicyPanel.vue?vue&type=style&index=0&id=8583d52e&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"8583d52e\",\n  null\n  \n)\n\nexport default component.exports","<template>\n    <b-form-group class=\"mb-0\">\n        <slot v-if=\"!customInput\" name=\"input-with-validation-panel\">\n            <fr-floating-label-input\n                name=\"password\"\n                fieldName=\"password\"\n                type=\"password\"\n                v-validate.initial=\"'required|policy'\"\n                v-model=\"password\"\n                :label=\"label || $t('common.placeholders.password')\"\n                :reveal=\"true\"\n                :showErrorState=\"false\"\n                @input=\"$emit('input', $event)\">\n\n                <fr-policy-panel slot=\"validationError\" :policies=\"policies\" :policyFailures=\"(showDefaultPolicyFailures) ?  defaultPolicyFailures : policyFailures\"></fr-policy-panel>\n            </fr-floating-label-input>\n        </slot>\n\n        <template v-else>\n            <slot name=\"custom-input\"></slot>\n            <fr-policy-panel :policies=\"policies\" :policyFailures=\"(showDefaultPolicyFailures) ?  defaultPolicyFailures : policyFailures\"></fr-policy-panel>\n        </template>\n    </b-form-group>\n</template>\n\n<script>\nimport _ from 'lodash';\nimport FloatingLabelInput from './FloatingLabelInput';\nimport PolicyPanel from './PolicyPanel';\n\n/**\n * @description The main display for the password policy component. Connects a text field to check policy on input to see if password correctly matches configured policy (makes use of policy.json)\n *\n * @fires POST /policy/selfservice/registration/?_action=validateObject - Submits an object in its current state to policy for validation against the configured policy\n *\n **/\nexport default {\n    name: 'PolicyPasswordInput',\n    inject: ['$validator'],\n    components: {\n        'fr-floating-label-input': FloatingLabelInput,\n        'fr-policy-panel': PolicyPanel\n    },\n    props: {\n        policyApi: { required: true, type: String },\n        defaultPolicyFailures: { required: false, type: Array },\n        value: String,\n        label: String,\n        exclude: {\n            required: false,\n            type: Array,\n            default () {\n                let policyApi = this.policyApi;\n                return [\n                    {\n                        name: 'REQUIRED',\n                        predicate (policyRequirements) {\n                            return _.includes(policyRequirements, 'REQUIRED') && _.includes(policyRequirements, 'MIN_LENGTH');\n                        }\n                    },\n                    {\n                        name: 'IS_NEW',\n                        predicate (policyRequirements) {\n                            return policyApi === 'selfservice/registration';\n                        }\n                    },\n                    'VALID_TYPE',\n                    'CANNOT_CONTAIN_OTHERS'\n                ];\n            }\n        }\n    },\n    data () {\n        return {\n            policies: [],\n            password: this.value,\n            failedExcludedPolicies: [],\n            showDefaultPolicyFailures: false\n        };\n    },\n    watch: {\n        failedExcludedPolicies (value) {\n            let policy = value[0];\n\n            if (policy) {\n                let policyError = this.$t(`common.policyValidationMessages.${policy.policyRequirements[0].policyRequirement}`, policy.policyRequirements[0].params),\n                    errorMessage = `${this.$t(`common.policyValidationMessages.policyValidationFailed`, { property: policy.property })}: ${policyError}`;\n\n                /* istanbul ignore next */\n                this.displayNotification('error', errorMessage);\n\n                this.failedExcludedPolicies = [];\n            }\n        },\n        defaultPolicyFailures (newVal) {\n            this.showDefaultPolicyFailures = true;\n        }\n    },\n    computed: {\n        policyFailures () {\n            let failures = this.errors.firstByRule('password', 'policy');\n\n            if (_.isUndefined(this.fields.password)) {\n                return 'loading';\n            } else if (_.isNull(failures) && this.fields.password.valid) {\n                return [];\n            } else {\n                return failures;\n            }\n        },\n        customInput () { return !_.isUndefined(this.$slots['custom-input']); }\n\n    },\n    methods: {\n        /**\n             * Predicates whether item matches 'password'. Policy Definition and Policy Failure objects\n             * have different shapes, so this function can be used as a predicate for both.\n             * @param {String} propName - The name of the property grab\n             * @param {Object} policyRequirementItem - object to predicate on\n             * @return {Boolean}\n             */\n        isPasswordPolicyItem: _.curry(function (propName, policyRequirementItem) {\n            return !_.isEmpty(policyRequirementItem[propName].match('password'));\n        }),\n        /**\n             * convert policy definition into a simple structure to work with\n             * @param {Object} policyDefinition\n             * @param {String[]} policyDefinition.policyRequirements - singleton array with policy name\n             * @param {Object} policyDefinition.params - objet containing params for policy (e.g. `{ params: { numNum: 1 } }\n             * @return {Object} - {name<String>, params<Object>}\n             */\n        toSimplePolicyObject (policyDefinition) {\n            let { policyRequirements, params } = policyDefinition,\n                name = _.first(policyRequirements);\n\n            if (!_.isUndefined(name)) {\n                return { name, params };\n            } else {\n                return {};\n            }\n        },\n        /**\n             * Change an array of Failed Policy objects to an array of policy names\n             * @param {Object} failedPolicySet - policy service response object\n             * @param {Object[]} failedPolicySet.failedPolicyRequirements - the list to map\n             * @return {String[]}\n             */\n        toPolicyNames (failedPolicySet) {\n            let failedPolicyRequirements = failedPolicySet.failedPolicyRequirements || [],\n                policyNames = failedPolicyRequirements\n                    .filter(this.isPasswordPolicyItem('property'))\n                    .map((failedPolicyDefinition) => {\n                        return _.at(failedPolicyDefinition, ['policyRequirements[0].policyRequirement']);\n                    });\n\n            return _.flatten(policyNames);\n        },\n        /**\n             * Remove from the policy service return set of policies those that are defined in the `exclude` prop\n             * @param {Object} policyRequirementSet - policy service response object\n             * @return {Object} - edited version of the policyRequirementSet\n             */\n        makeExclusions (policyRequirementSet) {\n            let policyRequirements,\n                policies;\n\n            if (policyRequirementSet && policyRequirementSet.policyRequirements) {\n                policyRequirements = policyRequirementSet.policyRequirements;\n            } else {\n                policyRequirements = [];\n            }\n\n            if (policyRequirementSet && policyRequirementSet.policies) {\n                policies = policyRequirementSet.policies;\n            } else {\n                policies = [];\n            }\n\n            const rejectPolicy = (requirement) => {\n                return _.reject(policies, (policy) => _.first(policy.policyRequirements) === requirement);\n            };\n\n            this.exclude.forEach((exclusion) => {\n                if (_.isObject(exclusion)) {\n                    if (exclusion.predicate(policyRequirements)) {\n                        policies = rejectPolicy(exclusion.name);\n                    }\n                } else if (_.isString(exclusion)) {\n                    if (_.includes(policyRequirements, exclusion)) {\n                        policies = rejectPolicy(exclusion);\n                    }\n                }\n            });\n\n            return Object.assign({}, policyRequirementSet, { policyRequirements, policies });\n        },\n        formatPayload (password) {\n            if (this.policyApi.match('registration')) {\n                return { user: { password } };\n            } else {\n                return { password };\n            }\n        },\n        getAction () {\n            return this.policyApi.match('selfservice') ? 'validateObject' : 'validateProperty';\n        }\n    },\n    created () {\n        // Initialize the policy service to be used in validation calls and the preliminary get call.\n        const headers = this.getAnonymousHeaders(),\n            policyService = this.getRequestService({ headers }),\n            formatPayload = this.formatPayload.bind(this),\n            // Create validation service call and bind to component scope.\n            requestPolicyValidation = function (password) {\n                let data = formatPayload(password);\n\n                // remove existing defaultPolicyFailures\n                // this.defaultPolicyFailures = null;\n\n                /* istanbul ignore next */\n                return policyService\n                    .post(`/policy/${this.policyApi}/?_action=${this.getAction()}`, data)\n                    .then(({ data }) => {\n                        if (data.failedPolicyRequirements) {\n                            _.map(data.failedPolicyRequirements, (failedPolicyRequirement) => {\n                                if (failedPolicyRequirement.property === 'password') {\n                                    this.showDefaultPolicyFailures = false;\n\n                                    // if the failure is included in excluded policies add it to the failedExcludedPolicies list\n                                    if (_.includes(this.exclude, failedPolicyRequirement.policyRequirements[0].policyRequirement)) {\n                                        this.failedExcludedPolicies.push(failedPolicyRequirement);\n                                    }\n                                }\n                            });\n                        }\n\n                        return this.toPolicyNames(data);\n                    }).catch(() => {\n                        /* istanbul ignore next */\n                        this.displayNotification('error', this.$t('common.policyValidationMessages.policyServiceError'));\n                    });\n            }.bind(this);\n\n        // Extend the validator with the custom validation rule.\n        this.$validator.extend('policy', {\n            validate (value, args) {\n                // Make policy service call.\n                /* istanbul ignore next */\n                return requestPolicyValidation(value).then((policyFailures) => {\n                    return {\n                        valid: _.isEmpty(policyFailures),\n                        data: policyFailures\n                    };\n                });\n            },\n            getMessage (field, params, data) {\n                return data;\n            }\n        });\n\n        // Get the initial policy list from the policy service.\n        /* istanbul ignore next */\n        policyService.get(`/policy/${this.policyApi}`)\n            .then(({ data }) => _.head(data.properties.filter(this.isPasswordPolicyItem('name'))))\n            .then((policyRequirementSet) => {\n                return this.makeExclusions(policyRequirementSet);\n            })\n            .then(({ policies }) => {\n                this.policies = policies\n                    .map(this.toSimplePolicyObject)\n                    .filter((p) => !_.isEmpty(p));\n            })\n            .catch(() => {\n                /* istanbul ignore next */\n                this.displayNotification('error', this.$t(`common.policyValidationMessages.policyServiceError.${this.policyApi}`));\n                this.$router.push('/login');\n            });\n    }\n};\n</script>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PolicyPasswordInput.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PolicyPasswordInput.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./PolicyPasswordInput.vue?vue&type=template&id=697570c2&\"\nimport script from \"./PolicyPasswordInput.vue?vue&type=script&lang=js&\"\nexport * from \"./PolicyPasswordInput.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}